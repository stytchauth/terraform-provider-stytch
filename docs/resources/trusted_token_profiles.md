---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "stytch_trusted_token_profiles Resource - stytch"
subcategory: ""
description: |-
  Resource for managing trusted token profiles.
---

# stytch_trusted_token_profiles (Resource)

Resource for managing trusted token profiles.

## Example Usage

```terraform
# Manage a JWK based trusted token profile with attribute mapping.
resource "stytch_trusted_token_profiles" "simple_example" {
  project_id      = stytch_project.consumer_project.test_project_id
  name            = "Simple Attribute Mapping"
  audience        = "https://example.com"
  issuer          = "https://auth.example.com"
  public_key_type = "jwk"
  jwks_url        = "https://auth.example.com/.well-known/jwks.json"

  attribute_mapping_json = jsonencode({
    "user_id" = "sub"
    "email"   = "email"
    "name"    = "display_name"
  })
}

# Manage a JWK based trusted token profile with complex attribute mapping.
resource "stytch_trusted_token_profiles" "complex_example" {
  project_id      = stytch_project.consumer_project.test_project_id
  name            = "Complex Attribute Mapping"
  audience        = "https://example.com"
  issuer          = "https://auth.example.com"
  public_key_type = "jwk"
  jwks_url        = "https://auth.example.com/.well-known/jwks.json"

  attribute_mapping_json = jsonencode({
    "user_id" = "sub"             # string
    "age"     = 25                # number
    "active"  = true              # boolean
    "roles"   = ["admin", "user"] # array
    "profile" = {                 # nested object
      "name" = "display_name"
      "type" = "user_type"
    }
    "metadata" = { # complex nested structure
      "preferences" = {
        "theme"         = "dark"
        "notifications" = true
      }
      "tags" = ["verified", "premium"]
    }
  })
}

# Manage a PEM based trusted token profile using herodoc for string formatting
resource "stytch_trusted_token_profiles" "pem_example" {
  project_id      = stytch_project.consumer_project.test_project_id
  name            = "PEM-based Profile"
  audience        = "https://example.com"
  issuer          = "https://auth.example.com"
  public_key_type = "pem"

  pem_files = [
    {
      public_key = <<EOT
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4f5wg5l2hKsTeNem/V41
fGnJm6gOdrj8ym3rFkEjWT2btYK36hY+c2QKfPU5O7w=
-----END PUBLIC KEY-----
EOT
    }
  ]
}

# Manage a PEM based trusted token profile using file for string formatting
resource "stytch_trusted_token_profiles" "pem_example_file" {
  project_id      = stytch_project.consumer_project.test_project_id
  name            = "PEM-based Profile"
  audience        = "https://example.com"
  issuer          = "https://auth.example.com"
  public_key_type = "pem"

  pem_files = [
    {
      public_key = file("${path.module}/public.pem")
    },
    {
      public_key = file("${path.module}/public2.pem")
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `audience` (String) The audience for the trusted token profile.
- `issuer` (String) The issuer for the trusted token profile.
- `name` (String) The name of the trusted token profile.
- `project_id` (String) The unique identifier for the project.
- `public_key_type` (String) The type of public key.

### Optional

- `attribute_mapping_json` (String) The attribute mapping as a JSON string. Keys must be strings, values can be strings, numbers, booleans, or nested objects.
- `jwks_url` (String) The JWKS URL for the trusted token profile.
- `pem_files` (Attributes Set) Set of PEM files associated with the trusted token profile. (see [below for nested schema](#nestedatt--pem_files))

### Read-Only

- `id` (String) A computed ID field used for Terraform resource management.
- `last_updated` (String) Timestamp of the last Terraform update.
- `profile_id` (String) The unique identifier for the trusted token profile.

<a id="nestedatt--pem_files"></a>
### Nested Schema for `pem_files`

Required:

- `public_key` (String) The public key content.

Read-Only:

- `pem_file_id` (String) The unique identifier for the PEM file.

## Import

Import is supported using the following syntax:

```shell
# A Stytch trusted token profile can be imported by specifying the relevant project ID and the profile ID
terraform import stytch_trusted_token_profiles.simple_example project-live-00000000-0000-0000-0000-000000000000.trusted-token-profile-test-00000000-0000-0000-0000-000000000000
```
