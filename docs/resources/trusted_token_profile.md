---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "stytch_trusted_token_profile Resource - stytch"
subcategory: ""
description: |-
  Resource for managing trusted token profiles.
---

# stytch_trusted_token_profile (Resource)

Resource for managing trusted token profiles.

## Example Usage

```terraform
# Example: Trusted Token Profile with JWK public key type
resource "stytch_trusted_token_profile" "example_jwk" {
  project_slug      = "my-project"
  environment_slug  = "production"
  name              = "My JWK Profile"
  audience          = "https://myapp.example.com"
  issuer            = "https://auth.example.com"
  public_key_type   = "JWK"
  jwks_url          = "https://auth.example.com/.well-known/jwks.json"
  can_jit_provision = false

  attribute_mapping_json = jsonencode({
    "email" = "user_email"
    "name"  = "user_name"
  })
}

# Example: Trusted Token Profile with PEM public key type
resource "stytch_trusted_token_profile" "example_pem" {
  project_slug     = "my-project"
  environment_slug = "production"
  name             = "My PEM Profile"
  audience         = "https://myapp.example.com"
  issuer           = "https://auth.example.com"
  public_key_type  = "PEM"

  pem_files = [
    {
      public_key = <<-EOT
        -----BEGIN PUBLIC KEY-----
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4f5wg5l2hKsTeNem/V41
        fGnJm6gOdrj8ym3rFkEU+wT6yv5TqnKkiugWELCHlKt7wc7eNHX0kRi3n5dXvN3w
        ...
        -----END PUBLIC KEY-----
      EOT
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `audience` (String) The audience for the trusted token profile.
- `environment_slug` (String) The slug of the environment to which the trusted token profile belongs.
- `issuer` (String) The issuer for the trusted token profile.
- `name` (String) The name of the trusted token profile.
- `project_slug` (String) The slug of the project to which the trusted token profile belongs.
- `public_key_type` (String) The type of public key. Valid values: JWK, PEM.

### Optional

- `attribute_mapping_json` (String) The attribute mapping as a JSON object where keys and values are strings.
- `can_jit_provision` (Boolean) Whether the trusted token profile can be provisioned just-in-time.
- `jwks_url` (String) The JWKS URL for the trusted token profile (required when public_key_type is JWK).
- `pem_files` (Attributes Set) Set of PEM files associated with the trusted token profile (required when public_key_type is PEM). (see [below for nested schema](#nestedatt--pem_files))

### Read-Only

- `id` (String) A computed ID field used for Terraform resource management (format: project_slug.environment_slug.profile_id).
- `last_updated` (String) Timestamp of the last Terraform update.
- `profile_id` (String) The unique identifier for the trusted token profile.

<a id="nestedatt--pem_files"></a>
### Nested Schema for `pem_files`

Required:

- `public_key` (String) The public key content.

Read-Only:

- `pem_file_id` (String) The unique identifier for the PEM file.

## Import

Import is supported using the following syntax:

```shell
# A Stytch trusted token profile can be imported by specifying the project slug, environment slug, and profile ID
# Format: project_slug.environment_slug.profile_id
terraform import stytch_trusted_token_profile.example my-project.production.ttp-test-11111111-1111-1111-1111-111111111111
```
